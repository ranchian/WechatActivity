<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>提交文件</title>
    <meta charset="utf-8" />
    <link href="../Content/bootstrap.min.css" rel="stylesheet" />
    <script src="../Scripts/jquery-1.10.2.min.js"></script>
</head>
<body>
<div class="container">
    <div class="row">
        
    </div>
    <div class="row">
        <form class="form" method="POST" action="/Test/File" enctype="multipart/form-data" id="form1">
            <div class="form-group">
                <label class="control-label" for="file1">文件</label>
                <input type="file" name="file1" class="form-control" id="file1" value=""  />
            </div>
            <div class="form-group">
                <input type="submit" class="btn btn-default" value="提交" />
            </div>
        </form>
    </div>
    <div class="row">
        <div>
            <button id="ajaxBtn" class="btn btn-default">ajax提交</button>
        </div>
    </div>
</div>
<script>
    $(function() {
        $("#ajaxBtn").click(function() {
            var d = new FormData(document.getElementById("form1"));
            
            $.ajax({
                url: "http://localhost:7101/Test/File",
                enctype: 'multipart/form-data',
                crossDomin: true,
                xhrFields: {
                    withCredentials: true
                },
                processData: false,
                contentType: false,
                data: d,
                type: "POST",
                success: function(r){
                    alert("SUCCESS: " + JSON.stringify(r));
                    d.reset();
                },
                error: function(r) {
                    alert("ERROR: " + JSON.stringify(r));
                }
            });
        });
    });
</script>
</body>
</html>
